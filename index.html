<!DOCTYPE html>
<html lang="ja" data-theme="classic">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cote-OS v6.1</title>
  <link rel="icon" href="images/favicon.ico" />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- TASKBAR: 3 non-overlapping flex zones. No position:absolute. -->
<header id="taskbar">

  <!-- LEFT: flex:1 -->
  <div id="tb-left">
    <span id="logo">COTE<span class="ac">OS</span></span>
    <span id="ver">v6.1</span>
    <nav id="breadcrumb" aria-label="パンくずリスト"></nav>
  </div>

  <!-- CENTER: flex:0, always clickable -->
  <div id="tb-center">
    <button id="btn-prev" class="tb-btn" title="前月へ (Ctrl+Left)">&#171;&nbsp;前月</button>
    <div id="date-block">
      <span id="date-display" aria-live="polite">Year 1 · 4月</span>
      <span id="slot-chip">スロット 1</span>
    </div>
    <button id="btn-next" class="tb-btn" title="次月へ (Ctrl+Right)">次月&nbsp;&#187;</button>
  </div>

  <!-- RIGHT: flex:1, gear accordion -->
  <div id="tb-right">
    <div id="gear-wrap">

      <!-- Tray: slides LEFT on .open — overflow:visible so flyout is not clipped -->
      <div id="gear-tray" aria-hidden="true">

        <!-- Theme flyout: same width as button, drops downward -->
        <div id="theme-wrap" class="gt-item-wrap">
          <button id="btn-theme" class="gt-btn theme-btn" title="テーマ切替">🎨&nbsp;テーマ</button>
          <div id="theme-flyout" class="gt-flyout" aria-hidden="true">
            <button class="tf-opt" data-theme="classic">Classic</button>
            <button class="tf-opt" data-theme="light">Light</button>
            <button class="tf-opt" data-theme="dark">Dark</button>
          </div>
        </div>

        <!-- History: does NOT close tray -->
        <button id="btn-history" class="gt-btn hist-btn" title="月次履歴">📋&nbsp;履歴</button>

        <span class="gt-div"></span>

        <div id="gt-slot-row" role="group" aria-label="セーブスロット">
          <span class="gt-lbl">スロット</span>
          <button class="sl" data-slot="1">1</button>
          <button class="sl" data-slot="2">2</button>
          <button class="sl" data-slot="3">3</button>
          <button class="sl" data-slot="4">4</button>
          <button class="sl" data-slot="5">5</button>
        </div>

        <span class="gt-div"></span>

        <button id="btn-export" class="gt-btn io-btn" title="書き出し">↓&nbsp;書出</button>
        <button id="btn-import" class="gt-btn io-btn" title="読み込み">↑&nbsp;読込</button>

        <span class="gt-div"></span>

        <button id="btn-save"  class="gt-btn ac-btn">セーブ</button>
        <button id="btn-reset" class="gt-btn dn-btn">リセット</button>
      </div><!-- /gear-tray -->

      <!-- Gear toggle — only this opens/closes the tray -->
      <button id="gear-btn" aria-label="設定メニュー" aria-expanded="false" title="設定">⚙</button>
    </div><!-- /gear-wrap -->

    <input type="file" id="file-pick" accept=".json,application/json"
           aria-hidden="true" tabindex="-1" />
  </div><!-- /tb-right -->

</header>

<main id="app"></main>

<div id="modal-overlay" class="hidden" role="dialog" aria-modal="true">
  <div id="modal-box">
    <button id="modal-x" aria-label="閉じる">✕</button>
    <div id="modal-body"></div>
  </div>
</div>

<div id="toast" role="status" aria-live="polite"></div>

<script src="app.js"></script>
</body>
</html>
